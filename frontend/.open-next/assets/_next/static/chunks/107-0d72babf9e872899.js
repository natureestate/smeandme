(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[107],{3629:(e,t,n)=>{"use strict";var r,i,o=Object.create,a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,f=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of s(t))c.call(e,i)||i===n||a(e,i,{get:()=>t[i],enumerable:!(r=l(t,i))||r.enumerable});return e},d={};((e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})})(d,{$dispatcherGuard:()=>S,$makeReadOnly:()=>I,$reset:()=>$,$structuralCheck:()=>C,c:()=>w,clearRenderCounterRegistry:()=>N,renderCounterRegistry:()=>_,useRenderCounter:()=>M}),e.exports=f(a({},"__esModule",{value:!0}),d);var p=((e,t,n)=>(n=null!=e?o(u(e)):{},f(e&&e.__esModule?n:a(n,"default",{value:e,enumerable:!0}),e)))(n(1521)),{useRef:y,useEffect:m,isValidElement:h}=p,g=null!=(r=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)?r:p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.memo_cache_sentinel"),w="function"==typeof(null==(i=p.__COMPILER_RUNTIME)?void 0:i.c)?p.__COMPILER_RUNTIME.c:function(e){return p.useMemo(()=>{let t=Array(e);for(let n=0;n<e;n++)t[n]=v;return t[v]=!0,t},[])},b={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(e=>{b[e]=()=>{throw Error(`[React] Unexpected React hook call (${e}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var x=null;function E(e){return g.ReactCurrentDispatcher.current=e,g.ReactCurrentDispatcher.current}b.useMemoCache=e=>{if(null!=x)return x.useMemoCache(e);throw Error("React Compiler internal invariant violation: unexpected null dispatcher")};var k=[];function S(e){let t=g.ReactCurrentDispatcher.current;if(0===e){if(k.push(t),1===k.length&&(x=t),t===b)throw Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");E(b)}else if(1===e){let e=k.pop();if(null==e)throw Error("React Compiler internal error: unexpected null in guard stack");0===k.length&&(x=null),E(e)}else if(2===e)k.push(t),E(x);else if(3===e){let e=k.pop();if(null==e)throw Error("React Compiler internal error: unexpected null in guard stack");E(e)}else throw Error("React Compiler internal error: unreachable block"+e)}function $(e){for(let t=0;t<e.length;t++)e[t]=v}function I(){throw Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var _=new Map;function N(){for(let e of _.values())e.forEach(e=>{e.count=0})}function M(e){let t=y(null);null!=t.current&&(t.current.count+=1),m(()=>{if(null==t.current){let n,r={count:0};null==(n=_.get(e))&&(n=new Set,_.set(e,n)),n.add(r),t.current=r}return()=>{null!==t.current&&function(e,t){let n=_.get(e);null!=n&&n.delete(t)}(e,t.current)}})}var R=new Set;function C(e,t,n,r,i,o){function a(e,t,a,l){let s=`${r}:${o} [${i}] ${n}${a} changed from ${e} to ${t} at depth ${l}`;R.has(s)||(R.add(s),console.error(s))}!function e(t,n,r,i){if(!(i>2)){if(t!==n)if(typeof t!=typeof n)a(`type ${typeof t}`,`type ${typeof n}`,r,i);else if("object"==typeof t){let o=Array.isArray(t),l=Array.isArray(n);if(null===t&&null!==n)a("null",`type ${typeof n}`,r,i);else if(null===n)a(`type ${typeof t}`,"null",r,i);else if(t instanceof Map)if(n instanceof Map)if(t.size!==n.size)a(`Map instance with size ${t.size}`,`Map instance with size ${n.size}`,r,i);else for(let[o,l]of t)n.has(o)?e(l,n.get(o),`${r}.get(${o})`,i+1):a(`Map instance with key ${o}`,`Map instance without key ${o}`,r,i);else a("Map instance","other value",r,i);else if(n instanceof Map)a("other value","Map instance",r,i);else if(t instanceof Set)if(n instanceof Set)if(t.size!==n.size)a(`Set instance with size ${t.size}`,`Set instance with size ${n.size}`,r,i);else for(let e of n)t.has(e)||a(`Set instance without element ${e}`,`Set instance with element ${e}`,r,i);else a("Set instance","other value",r,i);else if(n instanceof Set)a("other value","Set instance",r,i);else if(o||l)if(o!==l)a(`type ${o?"array":"object"}`,`type ${l?"array":"object"}`,r,i);else if(t.length!==n.length)a(`array with length ${t.length}`,`array with length ${n.length}`,r,i);else for(let o=0;o<t.length;o++)e(t[o],n[o],`${r}[${o}]`,i+1);else if(h(t)||h(n))h(t)!==h(n)?a(`type ${h(t)?"React element":"object"}`,`type ${h(n)?"React element":"object"}`,r,i):t.type!==n.type?a(`React element of type ${t.type}`,`React element of type ${n.type}`,r,i):e(t.props,n.props,`[props of ${r}]`,i+1);else{for(let e in n)e in t||a(`object without key ${e}`,`object with key ${e}`,r,i);for(let o in t)o in n?e(t[o],n[o],`${r}.${o}`,i+1):a(`object with key ${o}`,`object without key ${o}`,r,i)}}else{if("function"==typeof t)return;isNaN(t)||isNaN(n)?isNaN(t)!==isNaN(n)&&a(`${isNaN(t)?"NaN":"non-NaN value"}`,`${isNaN(n)?"NaN":"non-NaN value"}`,r,i):t!==n&&a(t,n,r,i)}}}(e,t,"",0)}},4583:(e,t,n)=>{"use strict";n.d(t,{TS:()=>function e(t){function n(e){return e?"string"==typeof e?r.C.fromString(e):e:[]}function o(e){if(!e.id)throw Error("`id` is required to create a data attribute");if(!e.type)throw Error("`type` is required to create a data attribute");if(!e.path||!e.path.length)throw Error("`path` is required to create a data attribute");var t={baseUrl:e.baseUrl||"/",workspace:e.workspace,tool:e.tool,type:e.type,id:e.id,path:"string"==typeof e.path?e.path:r.C.toString(e.path)};let{id:n,path:o,baseUrl:a,tool:u,workspace:c,type:f}=t;return(0,i.is)(l,t)?[["id",(0,r.IM)(n)],["type",f],["path",s(r.C.fromString(o))],["base",encodeURIComponent(a)],["workspace",c],["tool",u]].filter(([,e])=>!!e).map(e=>e.join("=")).join(";"):void 0}let a=e=>o({...t,path:[...n(t.path),...n(e)]});return a.toString=function(){return o(t)},a.combine=function(n){return e({...t,...n})},a.scope=function(r){return e({...t,path:[...n(t.path),...n(r)]})},a},bX:()=>m,hy:()=>s});var r=n(5282),i=n(3570);let o=(0,i.FsL)((0,i.YjP)(),(0,i.BpQ)(1)),a=(0,i.lqM)(o),l=(0,i.Ikc)({baseUrl:o,dataset:a,id:o,path:o,projectId:a,tool:a,type:a,workspace:a});function s(e){let t="";for(let n of e){if("string"==typeof n){t&&(t+="."),t+=n;continue}if("number"==typeof n){t&&(t+=":"),t+=`${n}`;continue}if(null!==n&&Array.isArray(n)){t&&(t+=":"),t+=`${n.join(",")}}`;continue}if(n._key){t&&(t+=":"),t+=`${n._key}`;continue}}return t}let u=/^([\w-]+):(0|[1-9][0-9]*)$/,c=/^([\w-]+):([0-9]+),([0-9]+)$/,f=/^([\w-]+):([\w-]+)$/,d=(0,i.FsL)((0,i.YjP)(),(0,i.BpQ)(1)),p=(0,i.Ikc)({origin:d,href:d,data:(0,i.lqM)((0,i.g1P)((0,i.YjP)(),(0,i.L5J)()))});function y(e){let t=(0,i.xLC)(l,e);if(t.success)return t.output;let n=(0,i.xLC)(p,e);if(n.success)try{let e=new URL(n.output.href,typeof document>"u"?"https://example.com":location.origin);return e.searchParams.size>0?(0,i.qgA)(l,Object.fromEntries(e.searchParams.entries())):n.output}catch(e){return console.error("Failed to parse sanity node",e),n.output}}function m(e){if("object"==typeof e&&null!==e)return y(e);try{let t=JSON.parse(e);return y(t)}catch{let t=e.split(";").reduce((e,t)=>{let[n,i]=t.split("=");if(!n||t.includes("=")&&!i)return e;switch(n){case"id":e.id=i;break;case"type":e.type=i;break;case"path":e.path=r.C.toString(function(e){let t=[];for(let n of e.split(".")){let e=u.exec(n);if(e){t.push(e[1],Number(e[2]));continue}let r=c.exec(n);if(r){t.push(r[1],[Number(r[2]),Number(r[3])]);continue}let i=f.exec(n);if(i){t.push(i[1],{_key:i[2]});continue}t.push(n)}return t}(i));break;case"base":e.baseUrl=decodeURIComponent(i);break;case"tool":e.tool=i;break;case"workspace":e.workspace=i;break;case"projectId":e.projectId=i;break;case"dataset":e.dataset=i}return e},{});if((0,i.is)(l,t))return t;return}}},7107:(e,t,n)=>{"use strict";let r;n.d(t,{UB:()=>er,nK:()=>en,Rt:()=>ee,Db:()=>v,v4:()=>E});var i=n(3629),o=n(5282),a=n(1521);function l(e){let t=(0,a.useRef)(null);return(0,a.useInsertionEffect)(()=>{t.current=e},[e]),(0,a.useCallback)((...e)=>(0,t.current)(...e),[])}var s=n(7507),u=n(7570),c=n(4583),f={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},d={0:8203,1:8204,2:8205,3:65279},p=[,,,,].fill(String.fromCodePoint(d[0])).join(""),y=Object.fromEntries(Object.entries(d).map(e=>e.reverse())),m=Object.fromEntries(Object.entries(f).map(e=>e.reverse())),h=`${Object.values(f).map(e=>`\\u{${e.toString(16)}}`).join("")}`,g=RegExp(`[${h}]{4,}`,"gu");function v(e,t){let n,r,c,f,d,p,y=(0,i.c)(21),[m,h]=(0,a.useState)(!0),[g,v]=(0,a.useState)(e),[w,b]=(0,a.useState)(null),[x,E]=(0,a.useState)(e),k=(0,u.cm)();y[0]!==t?(n=(e,n)=>(Array.isArray(t)?t:[t]).reduce((t,n)=>n(t,{document:e.document,id:(0,o.IM)(e.id),originalId:e.id,type:e.type}),n),y[0]=t,y[1]=n):n=y[1];let S=l(n);y[2]!==e?(r=()=>E(e),y[2]=e,y[3]=r):r=y[3];let $=l(r);return y[4]!==k||y[5]!==S||y[6]!==$?(c=()=>{let e;if((0,s.v)(k))return;let t=k.on("rebased.local",t=>{let n={document:t.document,id:t.id,originalId:(0,o.IM)(t.id),type:"mutate"};v(e=>S(n,e)),b(n),$(),h(!1),clearTimeout(e)}),n=k.on("pristine",()=>{e=setTimeout(()=>{(0,a.startTransition)(()=>h(!0))},15e3)});return()=>{t.unsubscribe(),n.unsubscribe()}},y[4]=k,y[5]=S,y[6]=$,y[7]=c):c=y[7],y[8]!==k?(f=[k],y[8]=k,y[9]=f):f=y[9],(0,a.useEffect)(c,f),y[10]!==w||y[11]!==x||y[12]!==e||y[13]!==m||y[14]!==S?(d=()=>{if(!m){if(!w)throw Error("No last event found when syncing passthrough");x!==e&&(0,a.startTransition)(()=>{v(S(w,e)),E(e)})}},y[10]=w,y[11]=x,y[12]=e,y[13]=m,y[14]=S,y[15]=d):d=y[15],y[16]!==w||y[17]!==x||y[18]!==e||y[19]!==m?(p=[w,x,e,m],y[16]=w,y[17]=x,y[18]=e,y[19]=m,y[20]=p):p=y[20],(0,a.useEffect)(d,p),m?e:g}let w=[];for(let e=0;e<256;++e)w.push((e+256).toString(16).slice(1));let b=new Uint8Array(16);var x={randomUUID:"u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function E(e,t,n){if(x.randomUUID&&!e)return x.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!r){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(b)}();if(i.length<16)throw Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e,t=0){return(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase()}(i)}function k(e){let t=e.getBoundingClientRect();return{x:t.x+scrollX,y:t.y+scrollY,w:t.width,h:t.height}}function S(e,t,n){return"x"===n?{x:e.x+t,y:e.y,w:e.w-2*t,h:e.h}:{x:e.x,y:e.y+t,w:e.w,h:e.h-2*t}}function $(e,t){return e.x===t.x&&e.y===t.y&&e.w===t.w&&e.h===t.h}function I(e,t){let n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function _(e,t,n){let r,i,o={x:e.x1,y:e.y1};if(t.some(e=>(function(e,t){let n=e.x>=t.x&&e.x<=t.x+t.w,r=e.y>=t.y&&e.y<=t.y+t.h;return n&&r})(o,S(e,Math.min(e.w,e.h)/10,"horizontal"===n?"x":"y"))))return null;for(let a of t){let t=function(e,t){let n=[{x1:t.x,y1:t.y,x2:t.x+t.w,y2:t.y},{x1:t.x+t.w,y1:t.y,x2:t.x+t.w,y2:t.y+t.h},{x1:t.x+t.w,y1:t.y+t.h,x2:t.x,y2:t.y+t.h},{x1:t.x,y1:t.y+t.h,x2:t.x,y2:t.y}],r=[];for(let t=0;t<n.length;t++){let i=function(e,t){let{x1:n,y1:r,x2:i,y2:o}=e,{x1:a,y1:l,x2:s,y2:u}=t;if(n===i&&r===o||a===s&&l===u)return!1;let c=(u-l)*(i-n)-(s-a)*(o-r);if(0===c)return!1;let f=((s-a)*(r-l)-(u-l)*(n-a))/c,d=((i-n)*(r-l)-(o-r)*(n-a))/c;return!(f<0)&&!(f>1)&&!(d<0)&&!(d>1)&&{x:n+f*(i-n),y:r+f*(o-r)}}(e,n[t]);if(i){let e=!1;for(let t=0;t<r.length;t++)r[t].x===i.x&&r[t].y===i.y&&(e=!0);e||r.push(i)}}return 0!==r.length&&r.sort((t,n)=>I(t,{x:e.x1,y:e.y1})-I(n,{x:e.x1,y:e.y1}))}(e,S(a,Math.min(a.w,a.h)/10,"horizontal"===n?"x":"y"));if(t){let e=t[0];r?I(o,e)<I(o,r)&&(r=e,i=a):(r=e,i=a)}}return i||null}function N(e,t,n){let{x:r,y:i,w:o,h:a}=e,{x:l,y:s}=n;return{x:l+(r-l)*t,y:s+(i-s)*t,w:o*t,h:a*t}}function M(e){let t=Math.max(0,Math.min(...e.map(e=>e.y))),n=Math.min(document.body.scrollHeight,Math.max(...e.map(e=>e.y+e.h)));return{min:t,max:n,height:n-t}}function R(e,t){return t.find(t=>$(k(t.elements.element),e))?.sanity}function C(e,t,n){return Object.values(t).every(e=>null===e)?null:"horizontal"===n?{left:t.left?{rect:t.left,sanity:R(t.left,e)}:null,right:t.right?{rect:t.right,sanity:R(t.right,e)}:null}:{top:t.top?{rect:t.top,sanity:R(t.top,e)}:null,bottom:t.bottom?{rect:t.bottom,sanity:R(t.bottom,e)}:null}}function O(e){let t=document.body.getBoundingClientRect();return{x:Math.max(t.x,Math.min(e.clientX,t.x+t.width)),y:e.clientY+window.scrollY}}function T(e,t,n){let r=k(t),i=[...t.querySelectorAll(":where(h1, h2, h3, h4, p, a, img, span, button):not(:has(*))")];e.x<=r.x&&(e.x=r.x),e.x>=r.x+r.w&&(e.x=r.x+r.w),e.y>=r.y+r.h&&(e.y=r.y+r.h),e.y<=r.y&&(e.y=r.y);let o=i.map(e=>{let t=N(k(e),n,{x:r.x,y:r.y});return{x:t.x-r.x,y:t.y-r.y,w:t.w,h:t.h,tagName:e.tagName}});return{offsetX:(r.x-e.x)*n,offsetY:(r.y-e.y)*n,w:r.w*n,h:r.h*n,maxWidth:r.w*n*.75,childRects:o}}async function A(e,t,n,r,i){return new Promise(o=>{e.addEventListener("transitionend",()=>{setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"})},2*i),o()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!0}),document.body.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.overflow="initial",document.documentElement.style.height="100%",setTimeout(()=>{e.style.transformOrigin="50% 0px",e.style.transition="transform 150ms ease",e.style.transform=`translate3d(0px, ${-n+scrollY}px, 0px) scale(${t})`},25)})}function L(e){let t=function(e){let t=Math.max(0,Math.min(...e.map(e=>e.x))),n=Math.min(document.body.offsetWidth,Math.max(...e.map(e=>e.x+e.w)));return{min:t,max:n,width:n-t}}(e),n=M(e),r=t.min>8&&t.min+t.width<=window.innerWidth-8,i=n.min>8&&n.min+n.height<=document.body.scrollHeight-8,o=r&&i;return{x:o?t.min-8:t.min,y:o?n.min-8:n.min,w:o?t.width+16:t.width,h:o?n.height+16:n.height}}async function j(e,t,n,r,i,o){return new Promise(a=>{if(1===new DOMMatrix(window.getComputedStyle(t).transform).a)return;let l=n-window.innerHeight,s=scrollY;(e-=window.innerHeight/2)<0&&(e=0),t.addEventListener("transitionend",()=>{t.style.transition="none",t.style.transform="none",scrollTo({top:e,behavior:"instant"}),setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!1})},2*i),a()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),t.style.transform=`translateY(${Math.max(s-e,-l+s)}px) scale(1)`,o&&(document.body.style.overflow=o.body.overflow,document.body.style.height=o.body.height,document.documentElement.style.overflow=o.documentElement.overflow,document.documentElement.style.height=o.documentElement.height)})}let U=!1,P={y:0},D={x:0,y:0},z=typeof document>"u"?0:document.documentElement.scrollHeight,Y=null,G=e=>e instanceof HTMLElement||e instanceof SVGElement,F=e=>e&&G(e)?e.dataset?.sanityOverlayElement?e:F(e.parentElement):null;function q(e){return g.lastIndex=0,g.test(e)}function H(e,t=!1){return q(e)?function(e,t=!1){try{let n=function(e){let t=e.match(g);if(t)return function(e,t=!1){let n=Array.from(e);if(n.length%2==0){if(n.length%4||!e.startsWith(p))return function(e,t){var n;let r=[];for(let t=.5*e.length;t--;){let n=`${m[e[2*t].codePointAt(0)]}${m[e[2*t+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(n,16)))}let i=[],o=[r.join("")],a=10;for(;o.length;){let e=o.shift();try{if(i.push(JSON.parse(e)),t)break}catch(r){if(!a--)throw r;let t=+(null==(n=r.message.match(/\sposition\s(\d+)$/))?void 0:n[1]);if(!t)throw r;o.unshift(e.substring(0,t),e.substring(t))}}return i}(n,t)}else throw Error("Encoded data has invalid length");let r=[];for(let e=.25*n.length;e--;){let t=n.slice(4*e,4*e+4).map(e=>y[e.codePointAt(0)]).join("");r.unshift(String.fromCharCode(parseInt(t,4)))}if(t){r.shift();let e=r.indexOf("\0");return -1===e&&(e=r.length),[JSON.parse(r.slice(0,e).join(""))]}return r.join("").split("\0").filter(Boolean).map(e=>JSON.parse(e))}(t[0],!0)[0]}(e);return n&&"sanity.io"===n.origin?(t&&(n.href=n.href?.replace(".alt","")),n):null}catch(t){return console.error("Failed to decode stega for string: ",e,"with the original error: ",t),null}}(e,t):null}let J=e=>e.nodeType===Node.ELEMENT_NODE,V=e=>"IMG"===e.tagName,W=e=>"TIME"===e.tagName,B=e=>"SVG"===e.tagName.toUpperCase();function X(e){return"path"in e}function K(e){if(!e.length||!e.map(e=>X(e)).every((e,t,n)=>e===n[0]))return;if(!X(e[0]))return e[0];let t=e.filter(X),n=e[0],r=["projectId","dataset","id","baseUrl","workspace","tool"];for(let e=1;e<t.length;e++){let i=t[e];if(r.some(e=>i[e]!==n?.[e])){n=void 0;break}n={...n,path:function(e,t){let n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);return n=n.slice(0,i).reverse(),r=r.slice(0,i).reverse(),n.reduce((e,t,n)=>t===r[n]?[...e,t]:[],[]).reverse().join(".")}(n.path,i.path)}}return n}function Q(e){let t=e.lastIndexOf(".");return e.substring(t,e.length).includes("[")}function Z(e){if(!Q(e))return null;let t=e.split(".");return t[t.length-1]=t[t.length-1].replace(/\[.*?\]/g,"[]"),t.join(".")}function ee(e,t){return!!Q(e.path)&&!!Q(t.path)&&Z(e.path)===Z(t.path)}function et(e,t,n,r){if(!e.getAttribute("data-sanity")||e.getAttribute("data-sanity-drag-disable")||!t||!X(t)||!Q(t.path))return null;let i=e.getAttribute("data-sanity-drag-group"),o=[...n].reduce((e,n)=>{let o=r.get(n),a=n.getAttribute("data-sanity-drag-disable"),l=n.getAttribute("data-sanity-drag-group"),s=null!==n.getAttribute("data-sanity");return o?.sanity&&!a&&X(o.sanity)&&ee(t,o.sanity)&&(null===i||i===l)&&s&&e.push(o),e},[]);return o.length<=1?null:o}function en({handler:e,overlayElement:t,inFrame:n,inPopUp:r,optimisticActorReady:i}){let o=!1,a=new Map,l=new WeakMap,s=new Set,u=new WeakMap,f=new WeakMap,d,p,y,m=!1,h=[],g=()=>h[h.length-1];function v(e,t){e.removeEventListener("click",t.click,{capture:!0}),e.removeEventListener("contextmenu",t.contextmenu,{capture:!0}),e.removeEventListener("mousemove",t.mousemove,{capture:!0}),e.removeEventListener("mousedown",t.mousedown,{capture:!0}),e.removeEventListener("mouseenter",t.mouseenter),e.removeEventListener("mouseleave",t.mouseleave)}function w({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;i.addEventListener("click",r.click,{capture:!0}),i.addEventListener("contextmenu",r.contextmenu,{capture:!0}),i.addEventListener("mousemove",r.mousemove,{once:!0,capture:!0}),i.addEventListener("mousedown",r.mousedown,{capture:!0}),d.observe(o),e({type:"element/activate",id:t})}function b({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;v(i,r),d.unobserve(o),h=h.filter(e=>e!==i),e({type:"element/deactivate",id:t})}function x(t){if(!(!n&&!r||!i))for(let n of h){if(t===n){let n=l.get(t)?.sanity;if(!n||!X(n))return;if(et(t,n,s,l)){let n=t.style.cursor;n&&f.set(t,n),e({type:"overlay/setCursor",element:t,cursor:"move"});continue}}S(n)}}function S(t){let n=f.get(t);e({type:"overlay/setCursor",element:t,cursor:n})}function R(f){for(let d of function e(t){let n=[];function r(e,t,n,r){let i=(0,c.bX)(t);if(!i)return;let o=function e(t){let{display:n}=window.getComputedStyle(t);if("inline"!==n)return t;let r=t.parentElement;return r?e(r):null}(e);if(o)return{elements:{element:e,measureElement:o},sanity:i,reason:n,preventGrouping:r}}if(t)for(let i of t.childNodes)!function t(i,o){let a=function(t){let{nodeType:n,parentElement:i,textContent:o}=t;if(J(t)&&t.dataset?.sanityEditTarget!==void 0){let n=K(e(t).map(e=>"element"===e.type?e.commonSanity:void 0).filter(e=>void 0!==e));if(n)return{reason:"edit-target",elements:{element:t,measureElement:t},sanity:n}}else if(n===Node.TEXT_NODE&&i&&o){let e=H(o);return e?r(i,e,"stega-text",!0):void 0}else if(J(t)){if("SCRIPT"===t.tagName||"SANITY-VISUAL-EDITING"===t.tagName)return;if(t.dataset?.sanity)return r(t,t.dataset.sanity,"data-attribute",!!(t.textContent&&q(t.textContent)));if(t.dataset?.sanityEditInfo)return r(t,t.dataset.sanityEditInfo,"data-attribute",!!(t.textContent&&q(t.textContent)));if(V(t)){let e=H(t.alt,!0);return e?r(t,e,"stega-attribute"):void 0}if(W(t)){let e=H(t.dateTime,!0);return e?r(t,e,"stega-attribute"):void 0}if(B(t)){if(!t.ariaLabel)return;let e=H(t.ariaLabel,!0);return e?r(t,e,"stega-attribute"):void 0}}}(i),l=o;if(J(i)&&i.dataset?.sanityEditGroup!==void 0&&(l={type:"group",elements:{element:i,measureElement:i},targets:[]},n.push(l)),a){let e={elements:a.elements,sanity:a.sanity,reason:a.reason};l&&!a.preventGrouping?l.targets.push(e):n.push({elements:a.elements,type:"element",targets:[e]})}if(J(i)&&!V(i)&&"SCRIPT"!==i.tagName&&"SANITY-VISUAL-EDITING"!==i.tagName)for(let e of i.childNodes)t(e,l)}(i,void 0);return n.map(e=>{if(0===e.targets.length&&"group"===e.type)return{...e,commonSanity:void 0};let t=1===e.targets.length?e.targets[0].sanity:K(e.targets.map(({sanity:e})=>e).filter(e=>void 0!==e))||e.targets[0].sanity;return t?{...e,commonSanity:t}:null}).filter(e=>null!==e)}(f)){if("group"===d.type){for(let e of d.targets){let t=l.get(e.elements.element);t&&"element"===t.type&&Z(e.elements.element)}0===d.targets.length&&Z(d.elements.element)}if(!d.commonSanity)continue;let{element:c}=d.elements;l.has(c)?function(t){let{element:n}=t.elements,r=l.get(n);r&&(l.set(n,{...r,sanity:t.commonSanity}),e({type:"element/update",elementType:r.type,id:r.id,rect:k(n),sanity:t.commonSanity,targets:t.targets.map(e=>({sanity:e.sanity,element:e.elements.element}))}))}(d):function({type:c,elements:f,commonSanity:d,targets:y}){let{element:v,measureElement:b}=f,R={click(t){let r=t.target;if(v===g()&&v.contains(r)){n&&(t.preventDefault(),t.stopPropagation());let r=l.get(v)?.sanity;r&&!m&&e({type:"element/click",id:q,sanity:r})}},contextmenu(t){if(!("path"in d)||!n&&!r||!i||!d.path.split(".").pop()?.includes("[_key=="))return;let o=t.target;v===g()&&v.contains(o)&&((n||r)&&(t.preventDefault(),t.stopPropagation()),e({type:"element/contextmenu",id:q,position:{x:t.clientX,y:t.clientY},sanity:d}))},mousedown(t){if(t.preventDefault(),t.currentTarget!==h.at(-1)||v.getAttribute("data-sanity-drag-disable")||!n&&!r||!i)return;let o=l.get(v)?.sanity;if(!o||!X(o)||!Q(o.path))return;let a=et(v,d,s,l);a&&function(e){var t;let{mouseEvent:n,element:r,overlayGroup:i,handler:o,target:a,onSequenceStart:l,onSequenceEnd:s}=e;if(0!==n.button)return;window.focus();let u=i.map(e=>k(e.elements.element)),c=r.getAttribute("data-sanity-drag-flow")||((t=u).some(e=>t.filter(t=>!$(e,t)).some(t=>e.y===t.y))?"horizontal":"vertical"),f=r.getAttribute("data-sanity-drag-group"),d=!!r.getAttribute("data-sanity-drag-minimap-disable"),p=!!r.getAttribute("data-sanity-drag-prevent-default"),y=r.getAttribute("data-unstable_sanity-drag-document-height"),m=r.getAttribute("data-unstable_sanity-drag-group-height"),h=null,g=O(n),v=document.body,{minYScaled:w,scaleFactor:b}=function(e,t){let n=t||M(e).height,r=(n+=200)>window.innerHeight?window.innerHeight/n:1,{min:i}=M(e.map(e=>N(e,r,{x:window.innerWidth/2,y:0})));return{scaleFactor:r,minYScaled:i-100*r}}(u,m?~~m:null),x=!1,E=!1,S=!0;U||(Y={body:{overflow:window.getComputedStyle(document.body).overflow,height:window.getComputedStyle(document.body).height},documentElement:{overflow:window.getComputedStyle(document.documentElement).overflow,height:window.getComputedStyle(document.documentElement).height}},z=y?~~y:document.documentElement.scrollHeight);let R=setInterval(()=>{u=i.map(e=>k(e.elements.element))},150),G=()=>{b>=1||(o({type:"overlay/dragUpdateSkeleton",skeleton:T(D,r,b)}),o({type:"overlay/dragToggleMinimapPrompt",display:!1}),A(v,b,w,o,150).then(()=>{setTimeout(()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:L(u)})},300)}))},F=e=>{Math.abs(e.deltaY)>=10&&b<1&&!U&&!E&&!d&&S&&(o({type:"overlay/dragToggleMinimapPrompt",display:!0}),E=!0),!e.shiftKey||U||d||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),U=!0,setTimeout(()=>{G()},50))},q=e=>{if(e.preventDefault(),P=function(e){let t=document.body,n=window.getComputedStyle(t).transform;if("none"===n)return{x:e.x,y:e.y};let r=new DOMMatrix(n).inverse(),i=new DOMPoint(e.x,e.y).matrixTransform(r);return{x:i.x,y:i.y}}(D=O(e)),4>Math.abs(I(D,g)))return;if(!x){let e=L(u),t=T(D,r,1);o({type:"overlay/dragStart",flow:c}),o({type:"overlay/dragUpdateSkeleton",skeleton:t}),o({type:"overlay/dragUpdateGroupRect",groupRect:e}),x=!0,l()}o({type:"overlay/dragUpdateCursorPosition",x:D.x,y:D.y}),!e.shiftKey||U||d||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),U=!0,setTimeout(()=>{G()},50));let t=function(e,t,n){if("horizontal"===n){let r={x1:e.x,y1:e.y,x2:e.x-1e8,y2:e.y},i={x1:e.x,y1:e.y,x2:e.x+1e8,y2:e.y};return{left:_(r,t,n),right:_(i,t,n)}}{let r={x1:e.x,y1:e.y,x2:e.x,y2:e.y-1e8},i={x1:e.x,y1:e.y,x2:e.x,y2:e.y+1e8};return{top:_(r,t,n),bottom:_(i,t,n)}}}(D,u,c);JSON.stringify(h)!==JSON.stringify(t)&&o({type:"overlay/dragUpdateInsertPosition",insertPosition:C(i,h=t,c)})},H=()=>{S=!1,o({type:"overlay/dragEnd",target:a,insertPosition:h?C(i,h,c):null,dragGroup:f,flow:c,preventInsertDefault:p}),E&&o({type:"overlay/dragToggleMinimapPrompt",display:!1}),U||(clearInterval(R),s(),X(),B()),W()},J=e=>{"Shift"===e.key&&U&&(U=!1,o({type:"overlay/dragUpdateSkeleton",skeleton:T(D,r,1/b)}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{j(P.y,v,z,o,150,Y)},50),o({type:"overlay/dragUpdateGroupRect",groupRect:null}),S||(clearInterval(R),W(),X(),B(),s()))},V=()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:null}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{j(P.y,v,z,o,150,Y).then(()=>{U=!1})},50),clearInterval(R),W(),X(),B(),s()},W=()=>{window.removeEventListener("mousemove",q),window.removeEventListener("wheel",F),window.removeEventListener("mouseup",H)},B=()=>{window.removeEventListener("keyup",J)},X=()=>{window.removeEventListener("blur",V)};window.addEventListener("blur",V),window.addEventListener("keyup",J),window.addEventListener("wheel",F),window.addEventListener("mousemove",q),window.addEventListener("mouseup",H)}({element:v,handler:e,mouseEvent:t,overlayGroup:a,target:o,onSequenceStart:()=>{m=!0},onSequenceEnd:()=>{setTimeout(()=>{m=!1},250)}})},mousemove(e){R.mouseenter(e);let t=e.currentTarget;t&&(t.addEventListener("mouseenter",R.mouseenter),t.addEventListener("mouseleave",R.mouseleave))},mouseenter(){document.querySelector("vercel-live-feedback")&&v.closest("[data-vercel-edit-info]")||v.closest("[data-vercel-edit-target]")||(h.push(v),e({type:"element/mouseenter",id:q,rect:k(v)}),x(v))},mouseleave(n){function r(){h.pop();let t=g();if(e({type:"element/mouseleave",id:q}),t){x(t);let n=l.get(t);n&&e({type:"element/mouseenter",id:n.id,rect:k(t)})}S(v)}let{relatedTarget:i}=n,o=F(i),a=t.contains(o);if(G(o)&&a)return function e(t){let n=i=>{let{relatedTarget:o}=i;F(o)?o&&G(o)&&(t.removeEventListener("mouseleave",n),e(o)):(t.removeEventListener("mouseleave",n),r())};t.addEventListener("mouseleave",n)}(o);r()}},q=E(),H={type:c,id:q,elements:f,sanity:d,handlers:R};s.add(v),u.set(b,v),a.set(q,v),l.set(v,H),p?.observe(v),e({type:"element/register",elementType:c,id:q,element:v,rect:k(v),sanity:d,dragDisabled:!!v.getAttribute("data-sanity-drag-disable"),targets:y.map(e=>({sanity:e.sanity,element:e.elements.element}))}),o&&w(H)}(d)}}function Z(t){let n=l.get(t);if(n){let{id:r,handlers:i}=n;v(t,i),d.unobserve(t),l.delete(t),s.delete(t),a.delete(r),e({type:"element/unregister",id:r})}}function ee(t){let n=l.get(t);n&&e({type:"element/updateRect",id:n.id,rect:k(t)})}function en(e){if(o)for(let t of e){let{target:e}=t,n=G(e)&&l.get(e);n&&(t.isIntersecting?w(n):b(n))}}function er(t){let n=F(t.target);if(n){"capture"===n.dataset.sanityOverlayElement&&(t.preventDefault(),t.stopPropagation());return}h=[],e({type:"overlay/blur"})}function ei(){h=[],e({type:"overlay/reset-mouse-state"})}function eo(){for(let e of s)ee(e)}function ea(t){"Escape"===t.key&&(h=[],e({type:"overlay/blur"}))}function el(e){let{target:t}=e;if(!(t===window.document||!G(t)))for(let e of s)t.contains(e)&&ee(e)}function es(){o||(p=new IntersectionObserver(en,{threshold:.3}),s.forEach(e=>p.observe(e)),e({type:"overlay/activate"}),o=!0)}function eu(){o&&(p?.disconnect(),s.forEach(e=>{let t=l.get(e);t&&b(t)}),e({type:"overlay/deactivate"}),o=!1)}function ec(t){let{id:n}=t.detail,r=a.get(n);if(!r)return;let i=l.get(r)?.sanity;i&&e({type:"element/click",id:n,sanity:i})}return window.document.fonts.ready.then(()=>{for(let e of s)ee(e)}),window.addEventListener("click",er),window.addEventListener("contextmenu",er),window.addEventListener("sanity-overlay/exclusive-plugin-closed",ei),window.addEventListener("sanity-overlay/label-click",ec),window.addEventListener("keydown",ea),window.addEventListener("resize",eo),window.addEventListener("scroll",el,{capture:!0,passive:!0}),d=new ResizeObserver(function(e){for(let t of e){let e=t.target;if(G(e)){let t=u.get(e);if(!t)return;ee(t)}}}),(y=new MutationObserver(function(e){let n=!1;for(let r of e){let{target:e,type:i}=r,o="characterData"===i?e.parentElement:e;if(!(o===t||t.contains(o))&&(n=!0,G(o))){let e=o.parentElement?.closest("[data-sanity-edit-group]")||null;R({childNodes:[G(e)?e:o]})}}if(n)for(let e of s)e.isConnected||Z(e),l.get(e)?.type!=="group"||e.hasAttribute("data-sanity-edit-group")||Z(e)})).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),R(document.body),es(),{activate:es,deactivate:eu,destroy:function(){window.removeEventListener("click",er),window.removeEventListener("contextmenu",er),window.removeEventListener("sanity-overlay/exclusive-plugin-closed",ei),window.removeEventListener("sanity-overlay/label-click",ec),window.removeEventListener("keydown",ea),window.removeEventListener("resize",eo),window.removeEventListener("scroll",el),y.disconnect(),d.disconnect(),s.forEach(e=>{Z(e)}),a.clear(),s.clear(),h=[],eu()}}}let er=(0,a.createContext)(null)},7507:(e,t,n)=>{"use strict";n.d(t,{Fj:()=>r,eN:()=>i,gA:()=>o,kv:()=>l,v:()=>a});let r=(0,n(1425).H6)(),i=r,o=new Set;function a(e){return e===r}function l(e){for(let t of(i=e,o))t()}},7570:(e,t,n)=>{"use strict";n.d(t,{Jt:()=>m,pq:()=>N,TT:()=>R,Ah:()=>_,N_:()=>C,US:()=>M,Ue:()=>S,cm:()=>g,xG:()=>x});var r=n(3629),i=n(5282),o=n(8924),a=n(9684),l=n(7507),s=n(1521);let u=/_key\s*==\s*['"](.*)['"]/,c=/^\d*:\d*$/;function f(e){return"number"==typeof e||"string"==typeof e&&/^\[\d+\]$/.test(e)}function d(e){return"string"==typeof e?u.test(e.trim()):"object"==typeof e&&"_key"in e}let p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/_key\s*==\s*['"](.*)['"]/;function m(e,t,n){let r="string"==typeof t?function(e){if("string"!=typeof e)throw Error("Path is not a string");let t=e.match(p);if(!t)throw Error("Invalid path string");return t.map(h)}(t):t;if(!Array.isArray(r))throw Error("Path must be an array or a string");let i=e;for(let e=0;e<r.length;e++){let t=r[e];if(f(t)){if(!Array.isArray(i))return n;i=i[t]}if(d(t)){if(!Array.isArray(i))return n;i=i.find(e=>e._key===t._key)}if("string"==typeof t&&(i="object"==typeof i&&null!==i?i[t]:void 0),typeof i>"u")return n}return i}function h(e){return f(e)?Number(e.replace(/[^\d]/g,"")):d(e)?{_key:e.match(y)[1]}:!function(e){if("string"==typeof e&&c.test(e))return!0;if(!Array.isArray(e)||2!==e.length)return!1;let[t,n]=e;return("number"==typeof t||""===t)&&("number"==typeof n||""===n)}(e)?e:function(e){let[t,n]=e.split(":").map(e=>""===e?e:Number(e));return[t,n]}(e)}function g(){return(0,s.useSyncExternalStore)(b,w,v)}function v(){return l.Fj}function w(){return l.eN}function b(e){return l.gA.add(e),()=>l.gA.delete(e)}function x(){let e=g();return!(0,l.v)(e)}function E(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(e,r)},t)}}function k(e,t){let n=(0,a.Fk)(),r=(0,a.v$)();if((0,l.v)(t)||!n&&!r)throw Error("The `useDocuments` hook cannot be used in this context");let o=(0,i.T4)(e),s=(0,i.IM)(e),u=t.getSnapshot().context?.documents,c=u?.[o],f=u?.[s],d=c||f;if(!d)throw Error(`Document "${e}" not found`);let p=c.getSnapshot().context?.local||f.getSnapshot().context?.local,y=new Promise(e=>{if(p)e(p);else{let t=d.on("ready",n=>{let{snapshot:r}=n;e(r||null),t.unsubscribe()})}});return{draftDoc:c,draftId:o,getSnapshot:()=>y,publishedDoc:f,publishedId:s,get snapshot(){if(!p)throw Error(`Snapshot for document "${e}" not found`);return p}}}function S(){let e,t,n,i=(0,r.c)(7),a=g();i[0]!==a?(e=e=>({id:e,commit:()=>{let{draftDoc:t}=k(e,a);t.send({type:"submit"})},get:t=>{let{snapshot:n}=k(e,a);return t?m(n,t):n},getSnapshot:function(e,t){let{getSnapshot:n}=k(e,t);return n}(e,a),patch:async(t,n)=>{let r=k(e,a),{draftDoc:i,draftId:l,getSnapshot:s,publishedId:u}=r,{commit:c=!0}=n||{},f=await ("function"==typeof t?t({draftId:l,publishedId:u,get snapshot(){return r.snapshot},getSnapshot:s}):t),d=await s();if(!d)throw Error(`Snapshot for document "${e}" not found`);i.send({type:"mutate",mutations:[(0,o.$A)({...d,_id:l}),(0,o.F6)(l,f)]}),c&&("object"==typeof c&&"debounce"in c?E(()=>i.send({type:"submit"}),c.debounce)():i.send({type:"submit"}))}}),i[0]=a,i[1]=e):e=i[1];let l=e;i[2]!==a?(t=(e,t,n)=>{let{draftDoc:r}=k(e,a),{commit:i}=n||{},o=void 0===i||i;r.send({type:"mutate",mutations:t}),o&&("object"==typeof o&&"debounce"in o?E(()=>r.send({type:"submit"}),o.debounce)():r.send({type:"submit"}))},i[2]=a,i[3]=t):t=i[3];let s=t;return i[4]!==l||i[5]!==s?(n={getDocument:l,mutateDocument:s},i[4]=l,i[5]=s,i[6]=n):n=i[6],n}let $=(()=>{let e;return()=>{if(e)return e;e=[];for(let t=0;t<256;++t)e[t]=(t+256).toString(16).slice(1);return e}})();function I(e){let t=$();return(function(e=16){let t=new Uint8Array(e);return function(e){let t="undefined"!=typeof window&&"crypto"in window?window.crypto:globalThis.crypto;if(!t||!t.getRandomValues)throw Error("WebCrypto not available in this environment");t.getRandomValues(e)}(t),t})(e).reduce((e,n)=>e+t[n],"").slice(0,e)}function _(e){let t,n,r="string"==typeof e?e:e.path,i=r.lastIndexOf("."),o=r.substring(i+1,r.length);if(!o.indexOf("["))throw Error("Invalid path: not an array");let a=r.lastIndexOf("["),l=r.substring(0,a);if(o.includes("_key")){let e=o.indexOf('"')+1,r=o.indexOf('"',e);t=o.substring(e,r),n=!0}else{let e=o.indexOf("[")+1,r=o.indexOf("]",e);t=o.substring(e,r),n=!1}if(!l||!t)throw Error("Invalid path");return{path:l,key:t,hasExplicitKey:n}}function N(e,t,n="after"){let{path:r,key:i}=_(e),a={...m(t,e.path),_key:I()};return[(0,o.at)(r,(0,o.Yr)(a,n,{_key:i}))]}function M(e,t){let{path:n,key:r}=_(e),i=m(t,n).findIndex(e=>e._key===r);return[(0,o.at)(n,(0,o.xv)(i,i+1))]}function R(e,t,n){let{path:r,key:i}=_(e),a=I();return[(0,o.at)(r,(0,o.Yr)([{_type:t,_key:a}],n,{_key:i}))]}async function C(e,t,n){if(!e.type)throw Error("Node type is missing");let{path:r,key:i}=_(e),a=await t.getSnapshot(),l=m(a,r),s=m(a,e.path),u=l.findIndex(e=>e._key===i),c=-1,f="before";if("first"===n){if(0===u)return[];c=0,f="before"}else if("last"===n){if(u===l.length-1)return[];c=-1,f="after"}else if("next"===n){if(u===l.length-1)return[];c=u,f="after"}else if("previous"===n){if(0===u)return[];c=u-1,f="before"}return[(0,o.at)(r,(0,o.xv)(u,u+1)),(0,o.at)(r,(0,o.Yr)(s,f,c))]}},8924:(e,t,n)=>{"use strict";function r(e){return e.split(/[[.\]]/g).filter(Boolean).map(e=>{var t;return e.includes("==")?function(e){let[t,n]=e.split("==");if("_key"!==t)throw Error(`Currently only "_key" is supported as path segment. Found ${t}`);if(typeof n>"u")throw Error('Invalid path segment, expected `key=="value"`');return{_key:n.replace(/^['"]/,"").replace(/['"]$/,"")}}(e):i.test(t=e)?Number(t):t})}n.d(t,{hY:()=>h,at:()=>x,$A:()=>E,Yr:()=>g,F6:()=>b,TF:()=>w,xv:()=>v});let i=/^-?\d+$/;function o(e){return"string"==typeof e?._key}let a=/^[a-z_$]+/;function l(e){return e.map((e,t)=>{var n,r;return n=0===t,Array.isArray(e)?`[${e[0]}:${e[1]||""}]`:"number"==typeof e?`[${e}]`:"object"==typeof(r=e)&&"_key"in r&&"string"==typeof r._key?`[_key==${JSON.stringify(e._key)}]`:"string"==typeof e&&a.test(e)?n?e:`.${e}`:`['${e}']`}).join("")}function s(e){if("createIfNotExists"in e)return{type:"createIfNotExists",document:e.createIfNotExists};if("createOrReplace"in e)return{type:"createOrReplace",document:e.createOrReplace};if("create"in e)return{type:"create",document:e.create};if("delete"in e)return{id:e.delete.id,type:"delete"};if("patch"in e){var t,n,i,o,a,l;return{type:"patch",id:e.patch.id,patches:[..."set"in(n=t=e.patch)?Object.keys(n.set).map(e=>({path:r(e),op:{type:"set",value:n.set[e]}})):[],..."setIfMissing"in(i=t)?Object.keys(i.setIfMissing).map(e=>({path:r(e),op:{type:"setIfMissing",value:i.setIfMissing[e]}})):[],..."unset"in(o=t)?o.unset.map(e=>({path:r(e),op:{type:"unset"}})):[],..."inc"in(a=t)?Object.keys(a.inc).map(e=>({path:r(e),op:{type:"inc",amount:a.inc[e]}})):[],..."inc"in(l=t)?Object.keys(l.dec).map(e=>({path:r(e),op:{type:"dec",amount:l.dec[e]}})):[],...function(e){if(!("insert"in e))return[];let t=function(e){let t=u.filter(t=>t in e);if(t.length>1)throw Error(`Insert patch is ambiguous. Should only contain one of: ${u.join(", ")}, instead found ${t.join(", ")}`);return t[0]}(e.insert);if(!t)throw Error("Insert patch missing position");let n=r(e.insert[t]),i=n.pop();return[{path:n,op:{type:"insert",position:t,referenceItem:i,items:e.insert.items}}]}(t)]}}throw Error(`Unknown mutation: ${JSON.stringify(e)}`)}let u=["before","replace","after"];function c(e){return d(e)}function f(e){return e.flatMap(c)}function d(e){if("create"===e.type||"createIfNotExists"===e.type||"createOrReplace"===e.type)return{[e.type]:e.document};if("delete"===e.type)return{delete:{id:e.id}};let t=e.options?.ifRevision;return e.patches.map(n=>({patch:{id:e.id,...t&&{ifRevisionID:t},...function(e){let{path:t,op:n}=e;if("unset"===n.type)return{unset:[l(t)]};if("insert"===n.type)return{insert:{[n.position]:l([...t,n.referenceItem]),items:n.items}};if("diffMatchPatch"===n.type)return{diffMatchPatch:{[l(t)]:n.value}};if("inc"===n.type)return{inc:{[l(t)]:n.amount}};if("dec"===n.type)return{dec:{[l(t)]:n.amount}};if("set"===n.type||"setIfMissing"===n.type)return{[n.type]:{[l(t)]:n.value}};if("truncate"===n.type){let e=[n.startIndex,"number"==typeof n.endIndex?n.endIndex:""].join(":");return{unset:[`${l(t)}[${e}]`]}}if("upsert"===n.type)return{unset:n.items.map(e=>l([...t,{_key:e._key}])),insert:{[n.position]:l([...t,n.referenceItem]),items:n.items}};if("assign"===n.type)return{set:Object.fromEntries(Object.keys(n.value).map(e=>[l(t.concat(e)),n.value[e]]))};if("unassign"===n.type)return{unset:n.keys.map(e=>l(t.concat(e)))};if("replace"===n.type)return{insert:{replace:l(t.concat(n.referenceItem)),items:n.items}};if("remove"===n.type)return{unset:[l(t.concat(n.referenceItem))]};throw Error(`Unknown operation type ${n.type}`)}(n)}}))}function p(e){return Array.isArray(e)?e:[e]}function y(e){return"string"==typeof e?{_key:e}:e}function m(e){return e?{options:{ifRevision:e}}:null}var h=Object.freeze({__proto__:null,decode:function(e){return s(e)},decodeAll:function(e){return e.map(s)},encode:c,encodeAll:f,encodeMutation:d,encodeTransaction:function(e){return{transactionId:e.id,mutations:f(e.mutations)}}});function g(e,t,n){return{type:"insert",referenceItem:n,position:t,items:p(e)}}function v(e,t){return{type:"truncate",startIndex:e,endIndex:t}}function w(e){return{type:"remove",referenceItem:e}}function b(e,t,n){return{type:"patch",id:e,patches:p(t),...n?{options:n}:{}}}function x(e,t){return{path:"string"==typeof e?r(e):e,op:t}}function E(e){return{type:"createIfNotExists",document:e}}}}]);