"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{9319:(e,r,t)=>{t.r(r),t.d(r,{default:()=>f});var c=t(4766),o=t(6769);let a=(0,o.createServerReference)("7f3814575fe34a4f9caa4acc21e6c9481c8317389b",o.callServer,void 0,o.findSourceMapURL,"setPerspectiveCookie");var l=t(9684),n=t(627),s=t(1521),i=t(7699),p=t(5313);function f(e){let{projectId:r,dataset:t,draftModeEnabled:o,draftModePerspective:f}=e,u=(0,n.useRouter)();(0,s.useEffect)(()=>{(0,p.lc)(r,t)},[t,r]);let v=(0,i.J)((e,r)=>{o&&e!==f&&a(e).then(()=>{r.aborted||u.refresh()}).catch(e=>console.error("Failed to set the preview perspective cookie",e))});return(0,s.useEffect)(()=>{let e,r=(0,c.RM)({name:"loaders",connectTo:"presentation"},(0,c.Uc)().provide({actors:(0,l.jF)()}));r.on("loader/perspective",r=>{e?.abort(),e=new AbortController,v(r.perspective,e.signal)});let t=r.start();return(0,p.El)(r),()=>{t()}},[]),null}f.displayName="PresentationComlink"}}]);